# ğŸ” åŠ å¯†æ—¥è®°æœ¬

ä¸€ä¸ªä½¿ç”¨ Astro + Tailwind CSS æ„å»ºçš„ç§å¯†åŠ å¯†æ—¥è®°ç½‘ç«™ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ” **AES-256 åŠ å¯†**ï¼šå®‰å…¨ä¿æŠ¤æ—¥è®°å†…å®¹
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…å„ç§è®¾å¤‡
- ğŸ¨ **ç°ä»£åŒ– UI**ï¼šTailwind CSS æ‰“é€ ç¾è§‚ç•Œé¢
- ğŸ”’ **åŒé‡ä¿æŠ¤**ï¼šç§æœ‰å­æ¨¡å—å­˜å‚¨åŸå§‹æ—¥è®°ï¼ŒåŠ å¯†æ•°æ®éƒ¨ç½²åˆ° GitHub Pages
- ğŸš€ **è‡ªåŠ¨éƒ¨ç½²**ï¼šGitHub Actions è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²
- ğŸ“ **ä¸€é”®æ›´æ–°**ï¼šè‡ªåŠ¨åŒ–è„šæœ¬ç®€åŒ–æ›´æ–°æµç¨‹

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. è®¾ç½®å¯†ç 

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
DIARY_PASSWORD=your_secret_password
```

### 3. åŠ å¯†æ—¥è®°

```bash
node scripts/encrypt-diaries.js
```

### 4. æœ¬åœ°é¢„è§ˆ

```bash
npm run dev
```

è®¿é—® http://localhost:4321

---

## ğŸ“ æ—¥å¸¸ä½¿ç”¨

### æ–¹å¼ 1: ä¸€é”®æ›´æ–°ï¼ˆæ¨èï¼‰

```bash
./update-and-deploy.sh
```

ï¼ˆå…¶å®åŸæœ¬æ˜¯å¯¹æ¥é»‘æ›œçŸ³çš„ï¼‰

**è‡ªåŠ¨å®Œæˆ**:
1. æ›´æ–° diary å­æ¨¡å—ï¼ˆæ‹‰å–æœ€æ–°æ—¥è®°ï¼‰
2. åŠ å¯†æ‰€æœ‰æ—¥è®°
3. æäº¤å¹¶æ¨é€åˆ° GitHub
4. è§¦å‘è‡ªåŠ¨éƒ¨ç½²

### æ–¹å¼ 2: æ‰‹åŠ¨æ­¥éª¤

```bash
# 1. åœ¨å­æ¨¡å—ä¸­å†™æ—¥è®°
cd diary
git add .
git commit -m "æ–°æ—¥è®°"
git push
cd ..

# 2. æ›´æ–°ä¸»é¡¹ç›®
git submodule update --remote diary
node scripts/encrypt-diaries.js

# 3. æäº¤å¹¶æ¨é€
git add public/diary-data.json diary
git commit -m "æ›´æ–°åŠ å¯†æ—¥è®°"
git push origin main
```

## ğŸ“– æ—¥è®°æ ¼å¼

åœ¨ `diary/` å­æ¨¡å—ä¸­åˆ›å»º markdown æ–‡ä»¶ã€‚

### âš ï¸ æ–‡ä»¶åè§„åˆ™

**æ–‡ä»¶åå¿…é¡»æ˜¯æ—¥æœŸæ ¼å¼**: `YYYY-MM-DD.md`

ä¾‹å¦‚: `2025-11-06.md`, `2024-12-25.md`

æ—¥è®°ä¼šæŒ‰æ–‡ä»¶åæ—¥æœŸæ’åºï¼Œæœ€æ–°çš„æ˜¾ç¤ºåœ¨å‰é¢ã€‚

### å¸¦ Frontmatterï¼ˆæ¨èï¼‰

```markdown
---
title: ä»Šå¤©çš„å¿ƒæƒ…
tags: [ç”Ÿæ´», éšç¬”]
---

æ—¥è®°å†…å®¹...
```

### ç®€å•æ ¼å¼

```markdown
# æ ‡é¢˜

æ—¥è®°å†…å®¹...
```

å¦‚æœæ²¡æœ‰æŒ‡å®š titleï¼Œå°†ä½¿ç”¨æ—¥æœŸä½œä¸ºæ ‡é¢˜ã€‚

---

## ğŸ”§ é¡¹ç›®ç»“æ„

```
dairy/
â”œâ”€â”€ .github/workflows/deploy.yml    # GitHub Actions éƒ¨ç½²
â”œâ”€â”€ diary/                          # ç§å¯†å­æ¨¡å—ï¼ˆä¸æäº¤åˆ°ä¸»ä»“åº“ï¼‰
â”œâ”€â”€ public/diary-data.json          # åŠ å¯†åçš„æ—¥è®°æ•°æ®
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ encrypt-diaries.js          # åŠ å¯†è„šæœ¬
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Login.astro             # ç™»å½•ç»„ä»¶
â”‚   â”‚   â””â”€â”€ DiaryList.astro         # æ—¥è®°åˆ—è¡¨
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ index.astro             # ç™»å½•é¡µ
â”‚       â””â”€â”€ diary.astro             # æ—¥è®°é¡µ
â”œâ”€â”€ update-and-deploy.sh            # Linux/Mac ä¸€é”®éƒ¨ç½²
â”œâ”€â”€ update-and-deploy.bat           # Windows ä¸€é”®éƒ¨ç½²
â””â”€â”€ .env                            # å¯†ç é…ç½®ï¼ˆä¸æäº¤ï¼‰
```

---

## ğŸ”’ å®‰å…¨è¯´æ˜

### åŠ å¯†åŸç†

```
diary/*.md (åŸå§‹æ—¥è®°)
    â†“ è¯»å–å¹¶è§£æ
    â†“ CryptoJS.AES.encrypt(JSON, password)
    â†“ 
public/diary-data.json (åŠ å¯†æ–‡ä»¶)
    â†“ git push
    â†“ GitHub Actions éƒ¨ç½²
    â†“
https://coperlm.github.io/dairy/
```

### å®‰å…¨ç‰¹æ€§

- âœ… **AES-256 åŠ å¯†**ï¼šå†›äº‹çº§åŠ å¯†ç®—æ³•
- âœ… **SHA-256 å“ˆå¸Œ**ï¼šå¯†ç éªŒè¯ä¸æ³„éœ²åŸæ–‡
- âœ… **å®¢æˆ·ç«¯è§£å¯†**ï¼šå¯†ç æ°¸ä¸ç¦»å¼€æµè§ˆå™¨
- âœ… **ç§æœ‰å­æ¨¡å—**ï¼šåŸå§‹æ—¥è®°æ°¸ä¸å…¬å¼€
- âœ… **åŠ å¯†å­˜å‚¨**ï¼šGitHub ä¸Šåªæœ‰åŠ å¯†æ•°æ®

### å®‰å…¨å»ºè®®

- ä½¿ç”¨å¼ºå¯†ç ï¼ˆå»ºè®® 16+ å­—ç¬¦ï¼‰
- å®šæœŸæ›´æ¢å¯†ç 
- å°† diary å­æ¨¡å—è®¾ä¸ºç§æœ‰ä»“åº“
- ä¸è¦æäº¤ `.env` æ–‡ä»¶
- é€šè¿‡ HTTPS è®¿é—®ç½‘ç«™

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
npm run dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build            # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview          # é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬

# åŠ å¯†
node scripts/encrypt-diaries.js  # åŠ å¯†æ—¥è®°

# å­æ¨¡å—
git submodule update --remote diary  # æ›´æ–°å­æ¨¡å—
git submodule update --init          # åˆå§‹åŒ–å­æ¨¡å—
```

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ï¼šåŠ è½½æ—¥è®°å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®ä¿ `public/diary-data.json` å­˜åœ¨
2. è¿è¡Œ `node scripts/encrypt-diaries.js`
3. æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®

### é—®é¢˜ï¼šå­æ¨¡å—ä¸ºç©º

**è§£å†³æ–¹æ¡ˆ**:
```bash
git submodule update --init --recursive
```

### é—®é¢˜ï¼šéƒ¨ç½²å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `.github/workflows/deploy.yml` é…ç½®
2. æŸ¥çœ‹ GitHub Actions æ—¥å¿—
3. ç¡®ä¿ `public/diary-data.json` å·²æäº¤

---

## ğŸ“š æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: [Astro](https://astro.build/)
- **æ ·å¼**: [Tailwind CSS](https://tailwindcss.com/)
- **åŠ å¯†**: [CryptoJS](https://cryptojs.gitbook.io/)
- **éƒ¨ç½²**: GitHub Actions + GitHub Pages

---

## ğŸ“„ License

MIT
